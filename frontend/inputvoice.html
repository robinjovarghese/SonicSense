<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SonicSense</title>
<link rel="stylesheet" href="inputvoice.css"> <!-- Link to your CSS file -->
</head>
<body>

<nav class="navbar">
    <div class="logo">
        <a href="index.html"><img src="sonic_logo.png" alt="Sonic Sense Logo"></a>
    </div>
    <div class="nav-links">
        <a href="index.html">Home</a>
        <a href="#">Contact</a>
    </div>
</nav>

<div class="container">
    <div class="form-container">
        <h2 class="subtitle">Enter name</h2>
        <input type="text" id="username" class="text-input">

        <h2 class="subtitle">Upload audio</h2>
        <input type="file" accept="audio/wav" id="voiceInput" class="file-input">
        
        <button onclick="uploadVoice()" class="upload-btn">Upload Voice</button>
    </div>

    <div class="message-container">
        <h2 class="subtitle">Server Response</h2>
        <h1 id="message" class="message"></h1>
    </div>
</div>

<footer>
    <span>
        Team <a href="/credits">SonicSense</a> &nbsp;
        <span class="far fa-copyright"></span> 2024 All rights reserved.
    </span>
</footer>

<script>
// Function to fetch data from Flask backend
function fetchData() {
    fetch('http://localhost:5000/api/data')
    .then(response => response.json())
    .then(data => {
        document.getElementById('message').textContent = data.message;
    })
    .catch(error => {
        console.error('Error fetching data:', error);
    });
}

// Fetch data when the page loads
document.addEventListener('DOMContentLoaded', fetchData);

// Function to upload voice file
function uploadVoice() {
    const fileInput = document.getElementById('voiceInput');
    const file = fileInput.files[0];
    if (!file) {
        alert('Please select a file.');
        return;
    }

    const username = document.getElementById('username').value;
    if (!username) {
        alert('Please enter a username.');
        return;
    }

    const formData = new FormData();
    formData.append('voiceFile', file);
    formData.append('username', username);

    fetch('http://localhost:5000/api/upload', {
        method: 'POST',
        body: formData
    })
    .then(response => response.json())
    .then(data => {
        console.log('Upload successful:', data);
    })
    .catch(error => {
        console.error('Error uploading file:', error);
    });
}
</script>

</body>
</html>
